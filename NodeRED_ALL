Shellies Forwarding
[{"id":"2e4ae376.a7276c","type":"tab","label":"Shellies forwarding"},{"id":"3a0e7e79.63db72","type":"mqtt in","z":"2e4ae376.a7276c","name":"Shelly_Temp","topic":"shellies/shellyht-2E2A34/sensor/temperature","qos":"2","broker":"bbb21d60.3162d","x":128.5,"y":236,"wires":[["5ffe75d8.38b49c"]]},{"id":"5ffe75d8.38b49c","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/shelly_temp","qos":"","retain":"","broker":"bbb21d60.3162d","x":658.5,"y":307,"wires":[]},{"id":"be9b11de.0bb36","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"shellies/shellyht-2E2A34/sensor/humidity","qos":"2","broker":"bbb21d60.3162d","x":202.5,"y":350,"wires":[["d22dc4.6da0724"]]},{"id":"d22dc4.6da0724","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/shelly_humidity","qos":"","retain":"","broker":"bbb21d60.3162d","x":657,"y":418,"wires":[]},{"id":"8e253661.4a8578","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"shellies/shellyht-2E2A34/sensor/battery","qos":"2","broker":"bbb21d60.3162d","x":185,"y":510,"wires":[["e07be8dd.38ec58"]]},{"id":"e07be8dd.38ec58","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/shelly_battery","qos":"","retain":"","broker":"bbb21d60.3162d","x":651.5,"y":578,"wires":[]},{"id":"dbcf67ac.6803f8","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/temp_testlab","qos":"","retain":"","broker":"bbb21d60.3162d","x":733.5,"y":735,"wires":[]},{"id":"6ba248e3.7248b8","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"testlab/TempC","qos":"2","broker":"bbb21d60.3162d","x":85,"y":719,"wires":[["dbcf67ac.6803f8"]]},{"id":"7ce878d1.3c8f98","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"uptime/Fbx","qos":"2","broker":"bbb21d60.3162d","x":136,"y":894,"wires":[["e01a4b11.7cd1c8","ed2a5bf2.9cde18"]]},{"id":"e01a4b11.7cd1c8","type":"function","z":"2e4ae376.a7276c","name":"Function Eval","func":"if(msg.payload < 750){\n  msg.payload = \"Alert Message - Freebox Restart\";\n} else {\n  return null; //dont fire function node output!\n}\nreturn msg;","outputs":1,"noerr":0,"x":462,"y":884,"wires":[["f4751ed1.1a518"]]},{"id":"f4751ed1.1a518","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"hello/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":795,"y":879,"wires":[]},{"id":"ed2a5bf2.9cde18","type":"debug","z":"2e4ae376.a7276c","name":"","active":true,"console":"false","complete":"false","x":437,"y":954,"wires":[]},{"id":"5a2101b0.2fbd2","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/temp_BME","qos":"","retain":"","broker":"bbb21d60.3162d","x":791.5,"y":1114,"wires":[]},{"id":"e4dbeb63.327898","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"testlab/BME_TempC","qos":"2","broker":"bbb21d60.3162d","x":153,"y":1098,"wires":[["5a2101b0.2fbd2"]]},{"id":"793e2f90.0ff5d","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/humid_BME","qos":"","retain":"","broker":"bbb21d60.3162d","x":770.5,"y":1189,"wires":[]},{"id":"442d3fb4.4d3e2","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"testlab/BME_Humid","qos":"2","broker":"bbb21d60.3162d","x":132,"y":1173,"wires":[["793e2f90.0ff5d"]]},{"id":"dc976fc3.2c2b5","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/pressure_BME","qos":"","retain":"","broker":"bbb21d60.3162d","x":810.5,"y":1260,"wires":[]},{"id":"5590e39b.006e1c","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"testlab/BME_Pressure","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":172,"y":1244,"wires":[["dc976fc3.2c2b5"]]},{"id":"5f5df9ad.5504c8","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"Temp/BME_battery","qos":"","retain":"","broker":"bbb21d60.3162d","x":834.5,"y":1349,"wires":[]},{"id":"b535bf80.3c0ab","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"testlab/BME_battV","qos":"2","broker":"bbb21d60.3162d","x":196,"y":1333,"wires":[["5f5df9ad.5504c8"]]},{"id":"88b73b44.786708","type":"mqtt in","z":"2e4ae376.a7276c","name":"Motion","topic":"tele/zigbee2mqtt/SENSOR_blockit","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":70,"y":2100,"wires":[["846f5411.e71d68","e8e3640f.5ab368"]]},{"id":"846f5411.e71d68","type":"debug","z":"2e4ae376.a7276c","name":"Debug2","active":false,"console":"false","complete":"true","x":517,"y":2104,"wires":[]},{"id":"6b2d8cd0.809e14","type":"function","z":"2e4ae376.a7276c","name":"","func":"\n    if (msg.payload.ZbReceived['0x43F5'].Device == '0x43F5'){\n    var newMsg = { payload: msg.payload.ZbReceived['0x43F5'].Occupancy };\n    return newMsg;   \n    } else {\n        return null;\n    }    \n\n","outputs":1,"noerr":0,"x":620,"y":2177,"wires":[["aba16c51.33e92","f3573f49.42c9d","e01541aa.71825"]]},{"id":"e8e3640f.5ab368","type":"json","z":"2e4ae376.a7276c","name":"","property":"payload","action":"","pretty":false,"x":419,"y":2284,"wires":[["6b2d8cd0.809e14"]]},{"id":"aba16c51.33e92","type":"debug","z":"2e4ae376.a7276c","name":"","active":false,"console":"false","complete":"payload","x":968,"y":2086,"wires":[]},{"id":"f3c87f61.20e4e","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":1540,"y":1880,"wires":[]},{"id":"f3573f49.42c9d","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"testlab/CatMvmt","qos":"","retain":"","broker":"bbb21d60.3162d","x":801,"y":2382,"wires":[]},{"id":"e01541aa.71825","type":"switch","z":"2e4ae376.a7276c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":831,"y":2182,"wires":[["fbaa629f.3d88b"],["15eed1c6.81e30e"]]},{"id":"fbaa629f.3d88b","type":"function","z":"2e4ae376.a7276c","name":"","func":"msg.payload = '{ \"device\":\"0xA4DA\", \"send\":{\"Dimmer\":\"150\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":1061,"y":2162,"wires":[["f3c87f61.20e4e"]]},{"id":"3930eb09.13b564","type":"function","z":"2e4ae376.a7276c","name":"","func":"msg.payload = '{ \"device\":\"0xA4DA\", \"send\":{\"Dimmer\":\"0\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":1191,"y":2262,"wires":[["f3c87f61.20e4e"]]},{"id":"15eed1c6.81e30e","type":"delay","z":"2e4ae376.a7276c","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1001,"y":2262,"wires":[["3930eb09.13b564"]]},{"id":"a39a5d89.fa1d4","type":"mqtt in","z":"2e4ae376.a7276c","name":"","topic":"zigbeeSensor/motion","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":220,"y":1460,"wires":[["ba9295cc.5fbb68"]]},{"id":"ba9295cc.5fbb68","type":"mqtt out","z":"2e4ae376.a7276c","name":"","topic":"testlab/motion","qos":"","retain":"","broker":"bbb21d60.3162d","x":820,"y":1480,"wires":[]},{"id":"bbb21d60.3162d","type":"mqtt-broker","z":"","broker":"192.168.1.100","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""}]

Leak Sensors
[{"id":"ac218d37.617d9","type":"tab","label":"Leak Sensors","disabled":false,"info":""},{"id":"97280d2.de158f","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK1","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":170,"y":180,"wires":[["8ca8c491.691598","df997941.622fb8"]]},{"id":"8ca8c491.691598","type":"function","z":"ac218d37.617d9","name":"","func":"if (msg.payload == 1){\n    msg.payload = \"LYON -- Potential leak detected on the Leak_sensor in the kitchen.\"\n    return msg\n} else {\n    node.warn(\"Returning Null\"); \n    return null;  \n}\n\n\n","outputs":1,"noerr":0,"x":390,"y":200,"wires":[["f39166ec.a32f58"]]},{"id":"f39166ec.a32f58","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"helloWARN/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":620,"y":200,"wires":[]},{"id":"df997941.622fb8","type":"debug","z":"ac218d37.617d9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":400,"y":140,"wires":[]},{"id":"6b53ed5d.cf2414","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK1_Z","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":160,"y":240,"wires":[["8ca8c491.691598"]]},{"id":"eef7b42f.b02f28","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK2","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":150,"y":440,"wires":[["ce249a26.405cb8","4e7f236d.39dfbc"]]},{"id":"ce249a26.405cb8","type":"function","z":"ac218d37.617d9","name":"","func":"if (msg.payload == 1){\n    msg.payload = \"LYON -- Potential leak detected on the Leak_sensor in the Bathroom.\"\n    return msg\n} else {\n    node.warn(\"Returning Null\"); \n    return null;  \n}\n\n\n","outputs":1,"noerr":0,"x":370,"y":460,"wires":[["361fea2e.638906"]]},{"id":"361fea2e.638906","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"helloWARN/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":600,"y":460,"wires":[]},{"id":"4e7f236d.39dfbc","type":"debug","z":"ac218d37.617d9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":380,"y":400,"wires":[]},{"id":"25c3b2bc.20cbfe","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK2_Z","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":140,"y":500,"wires":[["ce249a26.405cb8"]]},{"id":"aaf3ac3.1c8e45","type":"comment","z":"ac218d37.617d9","name":"AQ2 -- Bathroom AQARA Leak Detector","info":"","x":190,"y":360,"wires":[]},{"id":"672869c6.a6cb78","type":"comment","z":"ac218d37.617d9","name":"AQ1 -- Kitchen AQARA Leak Detector","info":"","x":210,"y":100,"wires":[]},{"id":"5faa8fa.837257","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK1","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":250,"y":620,"wires":[["4b82286.f131ed8"]]},{"id":"4b82286.f131ed8","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"testlab/Aq_LEAK1","qos":"","retain":"","broker":"bbb21d60.3162d","x":850,"y":640,"wires":[]},{"id":"1f07a02.63f136","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK2","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":250,"y":663,"wires":[["45a91882.7cdc28"]]},{"id":"45a91882.7cdc28","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"testlab/Aq_LEAK2","qos":"","retain":"","broker":"bbb21d60.3162d","x":850,"y":683,"wires":[]},{"id":"164be8b.7a97a17","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK1_Batt","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":270,"y":843,"wires":[["75bdb463.6aa25c"]]},{"id":"75bdb463.6aa25c","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"testlab/Aq_LEAK1_Batt","qos":"","retain":"","broker":"bbb21d60.3162d","x":870,"y":863,"wires":[]},{"id":"4645882d.8bd588","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Aq_LEAK2_Batt","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":270,"y":884,"wires":[["b34b0eec.131bc"]]},{"id":"b34b0eec.131bc","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"testlab/Aq_LEAK2_Batt","qos":"","retain":"","broker":"bbb21d60.3162d","x":870,"y":904,"wires":[]},{"id":"ca08042f.04f7a8","type":"mqtt in","z":"ac218d37.617d9","name":"","topic":"zigbeeSensor/Sonoff_Motion_Batt","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":280,"y":940,"wires":[["23c6c974.477aa6"]]},{"id":"23c6c974.477aa6","type":"mqtt out","z":"ac218d37.617d9","name":"","topic":"testlab/Sonoff_Motion_Batt","qos":"","retain":"","broker":"bbb21d60.3162d","x":880,"y":960,"wires":[]},{"id":"bbb21d60.3162d","type":"mqtt-broker","z":"","broker":"192.168.1.100","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""}]

ZIGBEE Forwrarding
[{"id":"f2f4350b.8c43b8","type":"tab","label":"ZIGBEE Forwarding","disabled":false,"info":""},{"id":"1b753fa7.b675d","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":890,"y":180,"wires":[["e4200737.8465a8"]]},{"id":"823add27.f5e01","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":890,"y":220,"wires":[["e4200737.8465a8"]]},{"id":"e4200737.8465a8","type":"function","z":"f2f4350b.8c43b8","name":"","func":"var count=global.get('count') || 100;\n\nif (msg.payload == 1){\n    if (count <= 300){\n         count = count + 50; \n    } else {\n        count = 350;\n    }\n} if (msg.payload == 2){\n    count = count - 50; \n}\n\n\nglobal.set('count',count);\nmsg.payload = count;\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1050,"y":180,"wires":[["d6a4cf32.d6555"]]},{"id":"d6a4cf32.d6555","type":"debug","z":"f2f4350b.8c43b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1210,"y":180,"wires":[]},{"id":"1f4326ee.1db719","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"55","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":890,"y":80,"wires":[["b34cf444.1afe88"]]},{"id":"b34cf444.1afe88","type":"function","z":"f2f4350b.8c43b8","name":"test","func":"count = 100; \nglobal.set('count',count);\nmsg.payload = count;\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":80,"wires":[["92a72539.163dc8"]]},{"id":"92a72539.163dc8","type":"debug","z":"f2f4350b.8c43b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1210,"y":80,"wires":[]},{"id":"c634116d.bfa82","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/DimmerMove","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":400,"y":380,"wires":[["8dc30f0c.5591c"]]},{"id":"8dc30f0c.5591c","type":"switch","z":"f2f4350b.8c43b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":610,"y":440,"wires":[["9f07593e.6347d8","5497d041.2e7c6"],["f8521cbe.88468","e2add2a8.ac7f7"]]},{"id":"8dc5718c.d6cef","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":960,"y":420,"wires":[]},{"id":"9f07593e.6347d8","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFriBR\", \"send\":{\"Power\":\"On\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":420,"wires":[["8dc5718c.d6cef"]]},{"id":"38155a56.76e1e6","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":960,"y":460,"wires":[]},{"id":"f8521cbe.88468","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFriBR\", \"send\":{\"Power\":\"Off\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":460,"wires":[["38155a56.76e1e6"]]},{"id":"5c45af38.a8cde","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/arrow_hold","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":130,"y":620,"wires":[["1876f779.a9b6c9"]]},{"id":"1876f779.a9b6c9","type":"switch","z":"f2f4350b.8c43b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":641,"wires":[["c001717d.57a8c"],["10facc39.5590b4"]]},{"id":"66fc6c46.372fc4","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":660,"y":621,"wires":[]},{"id":"c001717d.57a8c","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFriBR\", \"send\":{\"CT\":\"250\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":621,"wires":[["66fc6c46.372fc4"]]},{"id":"ccc8fed4.9e984","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":660,"y":661,"wires":[]},{"id":"10facc39.5590b4","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFriBR\", \"send\":{\"CT\":\"450\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":661,"wires":[["ccc8fed4.9e984"]]},{"id":"f6ca0c55.f9d73","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/motion","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":380,"y":900,"wires":[["39f035c0.471daa"]]},{"id":"39f035c0.471daa","type":"switch","z":"f2f4350b.8c43b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":880,"wires":[["a58850d5.be95"],["ab082a00.2fc348"]]},{"id":"a58850d5.be95","type":"function","z":"f2f4350b.8c43b8","name":"","func":"var IsDaytime=global.get('IsDaytime');\n\nvar DimmerVal = 30;\n\nnode.warn(\"dbg01: IsDaytime=\"+IsDaytime);\n\nif (IsDaytime == 1){\n    DimmerVal = 254;    \n} \n\n//msg.payload = '{ \"device\": \"TFri2\", \"send\": {\"Dimmer\":\"20\"} }'\n\n\nmsg.payload = '{ \"device\": \"TFri2\", \"send\": {\"Dimmer\":\"' + DimmerVal + '\"} }'\n\nreturn msg","outputs":1,"noerr":0,"x":730,"y":860,"wires":[["f16d36da.38ce08"]]},{"id":"f16d36da.38ce08","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":940,"y":880,"wires":[]},{"id":"ab082a00.2fc348","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFri2\", \"send\":{\"Power\":\"0\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":900,"wires":[["f16d36da.38ce08"]]},{"id":"cc06efdf.a647","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":1160,"wires":[["5ae992cc.fed0dc"]]},{"id":"f0c3be77.7f1f9","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":1200,"wires":[["5ae992cc.fed0dc"]]},{"id":"5ae992cc.fed0dc","type":"function","z":"f2f4350b.8c43b8","name":"","func":"var dimmer=global.get('dimmer') || 100;\n\nif (msg.payload == \"1\"){\n    dimmer = dimmer + 30; \n} \n\nif (msg.payload == \"0\"){\n         dimmer = dimmer - 30; \n}\n\nif (dimmer < 0){\n    dimmer = 2;\n}\n\nif (dimmer > 253){\n    dimmer = 250;\n}\n\n\n\nglobal.set('dimmer',dimmer);\nmsg.payload = '{ \"device\":\"TFriBR\", \"send\":{\"dimmer\":\"' + dimmer + '\"} }'\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":430,"y":1160,"wires":[["63bc959.1d25f6c","9705180a.1b43b8"]]},{"id":"63bc959.1d25f6c","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":630,"y":1160,"wires":[]},{"id":"43cd9e3e.fc09e","type":"inject","z":"f2f4350b.8c43b8","name":"Define retained Variable","topic":"","payload":"55","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1060,"wires":[["4b6cbe1d.ea2a6"]]},{"id":"4b6cbe1d.ea2a6","type":"function","z":"f2f4350b.8c43b8","name":"test","func":"dimmer  = 100; \nglobal.set('dimmer',dimmer);\nmsg.payload = dimmer;\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1100,"wires":[["d8b0cba0.4b2eb8"]]},{"id":"d8b0cba0.4b2eb8","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":1100,"wires":[]},{"id":"9705180a.1b43b8","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":680,"y":1200,"wires":[]},{"id":"e7df8950.ed1a78","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/button_power","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":160,"y":1100,"wires":[["6efbc23c.d3da9c","5ae992cc.fed0dc"]]},{"id":"6efbc23c.d3da9c","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":510,"y":1060,"wires":[]},{"id":"41a90097.137f1","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/arrow_click","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":310,"y":1360,"wires":[["8d724996.496668"]]},{"id":"8d724996.496668","type":"switch","z":"f2f4350b.8c43b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":510,"y":1360,"wires":[["724ddf3.05a742"],["d2a4b03.101e35"]]},{"id":"a655db4e.228608","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":1560,"wires":[["37a486ac.5f645a"]]},{"id":"c43ae893.2ecb08","type":"inject","z":"f2f4350b.8c43b8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":1600,"wires":[["37a486ac.5f645a"]]},{"id":"37a486ac.5f645a","type":"function","z":"f2f4350b.8c43b8","name":"","func":"var dimmer_w=global.get('dimmer_w') || 100;\n\nif (msg.payload == \"1\"){\n    dimmer_w = dimmer_w + 10; \n} \n\nif (msg.payload == \"0\"){\n         dimmer_w = dimmer_w - 10; \n}\n\nif (dimmer_w < 0){\n    dimmer_w = 2;\n}\n\nif (dimmer_w > 253){\n    dimmer_w = 250;\n}\n\n\n\nglobal.set('dimmer_w',dimmer_w);\nmsg.payload = '{ \"device\":\"RGBStr\", \"send\":{\"Hue\":\"' + dimmer_w + '\"} }'\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":430,"y":1560,"wires":[["528fff42.d1417","65eb3676.435a88"]]},{"id":"528fff42.d1417","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":610,"y":1560,"wires":[]},{"id":"56c14268.7d50cc","type":"inject","z":"f2f4350b.8c43b8","name":"Define retained Variable","topic":"","payload":"55","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":1480,"wires":[["91dd332b.953b4"]]},{"id":"91dd332b.953b4","type":"function","z":"f2f4350b.8c43b8","name":"test","func":"dimmer_w  = 100; \nglobal.set('dimmer_w',dimmer_w);\nmsg.payload = dimmer_w;\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1520,"wires":[["cee28814.2e5358"]]},{"id":"cee28814.2e5358","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":1520,"wires":[]},{"id":"65eb3676.435a88","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":660,"y":1600,"wires":[]},{"id":"40ee0bd8.8ed244","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/button_power_wh","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":170,"y":1520,"wires":[["7fc5e0b6.01d92","37a486ac.5f645a"]]},{"id":"7fc5e0b6.01d92","type":"debug","z":"f2f4350b.8c43b8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":1480,"wires":[]},{"id":"c324c5ee.839078","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/DimmerMove_wh","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":330,"y":1740,"wires":[["cc133cab.fe20f"]]},{"id":"cc133cab.fe20f","type":"switch","z":"f2f4350b.8c43b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":1760,"wires":[["2832994f.1ccf26"],["28c7b21c.350a9e"]]},{"id":"43036299.26357c","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":860,"y":1740,"wires":[]},{"id":"2832994f.1ccf26","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"RGBStr\", \"send\":{\"CT\":\"150\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1740,"wires":[["43036299.26357c"]]},{"id":"d5bd0cd.c6e13f","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":860,"y":1780,"wires":[]},{"id":"28c7b21c.350a9e","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"RGBStr\", \"send\":{\"CT\":\"375\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1780,"wires":[["d5bd0cd.c6e13f"]]},{"id":"59615d1e.8b5a94","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/tasmota_entry/power2","qos":"","retain":"","broker":"bbb21d60.3162d","x":420,"y":1960,"wires":[]},{"id":"20e77731.e8f6c8","type":"mqtt in","z":"f2f4350b.8c43b8","name":"","topic":"zigbeeSensor/arrow_click_wh","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":140,"y":1960,"wires":[["59615d1e.8b5a94"]]},{"id":"73508d7f.a3f3d4","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":920,"y":1340,"wires":[]},{"id":"724ddf3.05a742","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFri2\", \"send\":{\"dimmer\":\"254\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":1340,"wires":[["73508d7f.a3f3d4"]]},{"id":"25baf264.d2db9e","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/tasmota_one/power","qos":"","retain":"","broker":"bbb21d60.3162d","x":910,"y":1380,"wires":[]},{"id":"d2a4b03.101e35","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = 'Toggle'\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":1380,"wires":[["25baf264.d2db9e"]]},{"id":"194cdaf6.7a5965","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":960,"y":380,"wires":[]},{"id":"5497d041.2e7c6","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFri1\", \"send\":{\"Power\":\"On\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":380,"wires":[["194cdaf6.7a5965"]]},{"id":"f425c591.e7d6b8","type":"mqtt out","z":"f2f4350b.8c43b8","name":"","topic":"cmnd/zigbee2mqtt/ZbSend","qos":"","retain":"","broker":"bbb21d60.3162d","x":960,"y":500,"wires":[]},{"id":"e2add2a8.ac7f7","type":"function","z":"f2f4350b.8c43b8","name":"","func":"msg.payload = '{ \"device\":\"TFri1\", \"send\":{\"Power\":\"Off\"} }'\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":500,"wires":[["f425c591.e7d6b8"]]},{"id":"852e0924.213e38","type":"mqtt in","z":"f2f4350b.8c43b8","name":"Daytime_mqtt_IN","topic":"testlab/daytime","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":400,"y":840,"wires":[["6a5991f3.c603c"]]},{"id":"6a5991f3.c603c","type":"function","z":"f2f4350b.8c43b8","name":"","func":"IsDaytime  = 1; \n\nIsDaytime = msg.payload;\n\nglobal.set('IsDaytime',IsDaytime);\n\n\n\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":800,"wires":[[]]},{"id":"ab6ffbca.ba0a68","type":"inject","z":"f2f4350b.8c43b8","name":"Define retained Variable","topic":"","payload":"55","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":380,"y":800,"wires":[["aae9771d.9b8958"]]},{"id":"aae9771d.9b8958","type":"function","z":"f2f4350b.8c43b8","name":"test","func":"IsDaytime  = 1; \nglobal.set('IsDaytime',IsDaytime);\nmsg.payload = IsDaytime;\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":840,"wires":[["9b36a935.c51368"]]},{"id":"9b36a935.c51368","type":"debug","z":"f2f4350b.8c43b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":750,"y":820,"wires":[]},{"id":"942f08fe.2961f8","type":"comment","z":"f2f4350b.8c43b8","name":"KITCHEN_Switch -- Short VERTICAL press to change Hue in KITCHEN","info":"","x":290,"y":1440,"wires":[]},{"id":"4ead3ee0.78119","type":"comment","z":"f2f4350b.8c43b8","name":"KITCHEN_Switch -- LONG UP/DOWN press to change CT in KITCHEN","info":"","x":450,"y":1700,"wires":[]},{"id":"59c657e0.063638","type":"comment","z":"f2f4350b.8c43b8","name":"IKEA_BR_Switch -- Short RIGHT/LEFT press Right to Turn on full light in hallway, left to toggle bedside light  ","info":"","x":560,"y":1320,"wires":[]},{"id":"132cc395.1171cc","type":"comment","z":"f2f4350b.8c43b8","name":"IKEA_BR_Switch -- Short up/down press to change BRIGHTNESS in bedroom","info":"","x":310,"y":1020,"wires":[]},{"id":"ab038553.b95008","type":"comment","z":"f2f4350b.8c43b8","name":"Motion SENSOR - Turn the highway light on BRIGHT or SOFT based on Sundowner Python script","info":"","x":590,"y":760,"wires":[]},{"id":"edbba16a.1897d","type":"comment","z":"f2f4350b.8c43b8","name":"IKEA_BR_Switch -- on LOOOONG RIGHT/LEFT press, change the colour temperature in the Bedroom light","info":"","x":380,"y":580,"wires":[]},{"id":"b1223bde.64cc78","type":"comment","z":"f2f4350b.8c43b8","name":"IKEA_BR_Switch -- on LONG VERTICAL press, power on and off the Bedroom & Living Room lights in parallel","info":"","x":650,"y":340,"wires":[]},{"id":"c6a647d0.d8c208","type":"comment","z":"f2f4350b.8c43b8","name":"KITCHEN_Switch -- SHORT LEFT/RIGHT press to Turn ON/OFF the ENTRY LIGHT","info":"","x":310,"y":1920,"wires":[]},{"id":"fa4a14c.2cfe9e8","type":"comment","z":"f2f4350b.8c43b8","name":"DEBUG -- Set GLOBAL VARIABME","info":"","x":960,"y":40,"wires":[]},{"id":"ebeb37bc.0f6118","type":"comment","z":"f2f4350b.8c43b8","name":"DEBUG -- Set GLOBAL which is retained in a DIMMER type solution","info":"","x":1060,"y":140,"wires":[]},{"id":"bbb21d60.3162d","type":"mqtt-broker","z":"","broker":"192.168.1.100","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""}]

Battery Monitoring
[{"id":"17a2052.ec011fb","type":"tab","label":"Battery Monitoring","disabled":false,"info":""},{"id":"f63deb2d.f82ea8","type":"mqtt in","z":"17a2052.ec011fb","name":"","topic":"testlab/battV","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":210,"y":220,"wires":[["71e55a38.565334","8bae833.2c46d8"]]},{"id":"71e55a38.565334","type":"function","z":"17a2052.ec011fb","name":"","func":"var alerte=global.get('alerte') || 0;\nvar voltage = msg.payload;\nnode.warn(\"DBG01: alerte is \" + alerte);\nvar limit = 3.2; \n\nvar return_nothing = 0.1;\n\nif (msg.payload > limit){\n    alerte = 0.5;\n    return_nothing = 1;\n} if (msg.payload <= limit){\n        if (alerte < 0.9){\n            let ans = \"Lyon, Low battery on the Entry TempMon, less than \" + limit + \" V, the voltage value is \" + voltage; \n            msg.payload = ans; \n            alerte = 1;\n              \n        } else {\n            return_nothing = 1;\n        \n        }\n        \n    \n}\n\nnode.warn(\"DBG02: alerte is \" + alerte);\nglobal.set('alerte',alerte);\n\nif (return_nothing == 1){\n    node.warn(\"Returning Null\")\n    return null\n} else {\n    return msg;  \n}\n\n\n","outputs":1,"noerr":0,"x":430,"y":220,"wires":[["27ba34b6.b00dac"]]},{"id":"74887125.87aa7","type":"inject","z":"17a2052.ec011fb","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":80,"wires":[["ead04242.9bee1"]]},{"id":"ead04242.9bee1","type":"function","z":"17a2052.ec011fb","name":"test","func":"alerte = 0; \nglobal.set('alerte',alerte);\nmsg.payload = alerte;\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":80,"wires":[["e569f02c.013e1"]]},{"id":"e569f02c.013e1","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":80,"wires":[]},{"id":"4f5f3b6a.5031b4","type":"comment","z":"17a2052.ec011fb","name":"DEBUG -- Set GLOBAL VARIABLE (alerte)","info":"","x":260,"y":40,"wires":[]},{"id":"27ba34b6.b00dac","type":"mqtt out","z":"17a2052.ec011fb","name":"","topic":"hello/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":640,"y":220,"wires":[]},{"id":"8bae833.2c46d8","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":440,"y":160,"wires":[]},{"id":"fea8a858.990648","type":"mqtt in","z":"17a2052.ec011fb","name":"","topic":"testlab/Linky_battV","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":230,"y":380,"wires":[["10f8a514.e8512b","7f27ff8a.95de5"]]},{"id":"10f8a514.e8512b","type":"function","z":"17a2052.ec011fb","name":"","func":"var alerte=global.get('alerte1') || 0;\nvar voltage = msg.payload;\nnode.warn(\"DBG01: alerte is \" + alerte);\nvar limit = 3.2; \n\nvar return_nothing = 0.1;\n\nif (msg.payload > limit){\n    alerte = 0.5;\n    return_nothing = 1;\n} if (msg.payload <= limit){\n        if (alerte < 0.9){\n            let ans = \"Lyon, Low battery on the Linky Monitor, less than \" + limit + \" V, the voltage value is \" + voltage; \n            msg.payload = ans; \n            alerte = 1;\n              \n        } else {\n            return_nothing = 1;\n        \n        }\n        \n    \n}\n\nnode.warn(\"DBG02: alerte is \" + alerte);\nglobal.set('alerte1',alerte);\n\nif (return_nothing == 1){\n    node.warn(\"Returning Null\")\n    return null\n} else {\n    return msg;  \n}\n\n\n","outputs":1,"noerr":0,"x":430,"y":380,"wires":[["aad58489.612848"]]},{"id":"aad58489.612848","type":"mqtt out","z":"17a2052.ec011fb","name":"","topic":"hello/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":640,"y":380,"wires":[]},{"id":"7f27ff8a.95de5","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":440,"y":320,"wires":[]},{"id":"dc72e3f6.45a25","type":"inject","z":"17a2052.ec011fb","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":330,"y":480,"wires":[["26e585a.4104c7a"]]},{"id":"26e585a.4104c7a","type":"function","z":"17a2052.ec011fb","name":"test","func":"alerte1 = 0; \nglobal.set('alerte1',alerte1);\nmsg.payload = alerte1;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":480,"wires":[["be8404c1.731cb8"]]},{"id":"be8404c1.731cb8","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":650,"y":480,"wires":[]},{"id":"335adb20.2e58d4","type":"comment","z":"17a2052.ec011fb","name":"DEBUG -- Set GLOBAL VARIABLE (alerte1)","info":"","x":430,"y":440,"wires":[]},{"id":"960f0518.07b548","type":"mqtt in","z":"17a2052.ec011fb","name":"","topic":"testlab/BME_battV","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":190,"y":820,"wires":[["bda27ad5.aad898","9194d608.2b8f08"]]},{"id":"bda27ad5.aad898","type":"function","z":"17a2052.ec011fb","name":"","func":"var alerte=global.get('alerte2') || 0;\nvar voltage = msg.payload;\nnode.warn(\"DBG01: alerte is \" + alerte);\nvar limit = 3.3; \n\nvar return_nothing = 0.1;\n\nif (msg.payload > limit){\n    alerte = 0.5;\n    return_nothing = 1;\n} if (msg.payload <= limit){\n        if (alerte < 0.9){\n            let ans = \"Lyon, Low battery on the BME Sensor, less than \" + limit + \" V, the voltage value is \" + voltage; \n            msg.payload = ans; \n            alerte = 1;\n              \n        } else {\n            return_nothing = 1;\n        \n        }\n        \n    \n}\n\nnode.warn(\"DBG02: alerte is \" + alerte);\nglobal.set('alerte2',alerte);\n\nif (return_nothing == 1){\n    node.warn(\"Returning Null\")\n    return null\n} else {\n    return msg;  \n}\n\n\n","outputs":1,"noerr":0,"x":390,"y":820,"wires":[["2fe87409.5a53ec"]]},{"id":"2fe87409.5a53ec","type":"mqtt out","z":"17a2052.ec011fb","name":"","topic":"hello/world","qos":"","retain":"","broker":"bbb21d60.3162d","x":600,"y":820,"wires":[]},{"id":"9194d608.2b8f08","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":400,"y":760,"wires":[]},{"id":"12972d5a.c50963","type":"inject","z":"17a2052.ec011fb","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":290,"y":920,"wires":[["856da80d.56b7f8"]]},{"id":"856da80d.56b7f8","type":"function","z":"17a2052.ec011fb","name":"test","func":"alerte2 = 0; \nglobal.set('alerte2',alerte2);\nmsg.payload = alerte2;\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":920,"wires":[["38c31b5f.3ae884"]]},{"id":"38c31b5f.3ae884","type":"debug","z":"17a2052.ec011fb","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":920,"wires":[]},{"id":"30c9ab1b.9dc374","type":"comment","z":"17a2052.ec011fb","name":"DEBUG -- Set GLOBAL VARIABLE (alerte2)","info":"","x":390,"y":880,"wires":[]},{"id":"bbb21d60.3162d","type":"mqtt-broker","z":"","broker":"192.168.1.100","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""}]

IKEA Vindriktning Flow
[{"id":"c5c09f49.36948","type":"tab","label":"Ikea Vindriktning Data Treatment","disabled":false,"info":""},{"id":"595cfd9c.68df24","type":"mqtt in","z":"c5c09f49.36948","name":"Vindriktning JSON","topic":"esp8266-vindriktning-particle-sensor/VINDRIKTNING-3C85CB/state","qos":"2","datatype":"auto","broker":"bbb21d60.3162d","x":190,"y":280,"wires":[["84134a33.77f758","e1d79736.aacb08"]]},{"id":"84134a33.77f758","type":"debug","z":"c5c09f49.36948","name":"Debug2","active":false,"console":"false","complete":"true","x":600,"y":240,"wires":[]},{"id":"b3fa20dd.b7f9c","type":"function","z":"c5c09f49.36948","name":"","func":"msg.payload = msg.payload.pm25;\n\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":357,"wires":[["4d84455e.cded1c"]]},{"id":"e1d79736.aacb08","type":"json","z":"c5c09f49.36948","name":"","property":"payload","action":"obj","pretty":false,"x":440,"y":380,"wires":[["a161fdbd.004b8","b3fa20dd.b7f9c"]]},{"id":"a161fdbd.004b8","type":"debug","z":"c5c09f49.36948","name":"Debug2","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":626,"y":506,"wires":[]},{"id":"4d84455e.cded1c","type":"mqtt out","z":"c5c09f49.36948","name":"","topic":"testlab/Vindr_PM25","qos":"","retain":"","broker":"bbb21d60.3162d","x":1020,"y":360,"wires":[]},{"id":"bbb21d60.3162d","type":"mqtt-broker","z":"","broker":"192.168.1.100","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""}]
